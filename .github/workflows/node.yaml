name: CI/CD Pipeline
on: 
  push:
    branches:
      - master
    tags:
      - v.*.*
jobs:
  install_and_serve:
    name: Install and serve
    runs-on: ubuntu-latest
    steps:
    - uses: action/setup-node@v1
      with:
        node-version: '14'
    - run: |
        npm ci
        npm install
        npm test
        npm start
  create_ticket:
    name: Creating ticket and pushing to Yandex.Tracker
    runs-on: ubuntu-latest
    steps:
      - run: | chmod +x create_ticket_script.sh
        create_ticket_script.sh
    
    
#jobs:
 # install_and_serve:
  #  name: Install and serve
   # runs-on: ubuntu-latest
    #steps:
    #- uses: actions/checkout@v2
    #- uses: actions/setup-node@v2
    #  with:
    #    node-version: '14'
    #- run: npm install -g bats
    #- run: npm test
    #- run: bats -v
    #- run: npm start
